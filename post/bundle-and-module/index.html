<!DOCTYPE html>
<html lang="en-us">
    <head>
        
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-6TN7PCJZTQ"></script>
<script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
        dataLayer.push(arguments);
    }
    gtag('js', new Date());

    gtag('config', 'G-6TN7PCJZTQ');
</script>

        <meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='JavaScript에서 제공하는 모듈의 종류와 모듈을 묶어주는 번들러의 역할과 최적화 방법을 공유합니다.'><title>번들러와 모듈 시스템</title>
<link rel='canonical' href='https://jinyisland.kr/post/bundle-and-module/'>
<link rel="icon" href="/%20/favicon.png" type="image/png">

<link rel="stylesheet" href="/scss/style.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.css"><script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.min.js"></script><meta property='og:title' content='번들러와 모듈 시스템'>
<meta property='og:description' content='JavaScript에서 제공하는 모듈의 종류와 모듈을 묶어주는 번들러의 역할과 최적화 방법을 공유합니다.'>
<meta property='og:url' content='https://jinyisland.kr/post/bundle-and-module/'>
<meta property='og:site_name' content='Jiny'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='webpack' /><meta property='article:tag' content='rollup' /><meta property='article:published_time' content='2023-11-22T03:34:57&#43;09:00' /><meta property='article:modified_time' content='2023-11-22T03:34:57&#43;09:00' />
<meta property='og:image' content='https://jinyisland.kr/assets/header/bundler-and-module.png' />
<meta name="twitter:title" content="번들러와 모듈 시스템">
<meta name="twitter:description" content="JavaScript에서 제공하는 모듈의 종류와 모듈을 묶어주는 번들러의 역할과 최적화 방법을 공유합니다."><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://jinyisland.kr/../../assets/header/bundler-and-module.png' /><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">

<style>
    .article-content code {
        word-wrap: break-word;
    }
</style>
    </head>
    <body class="">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.body.dataset.scheme = 'dark';
        } else {
            document.body.dataset.scheme = 'light';
        }
    })();
</script><div class="container main-container flex on-phone--column extended article-page with-toolbar">
            <aside class="sidebar left-sidebar sticky">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header class="site-info">
        
            <figure class="site-avatar">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hub38313664a67c625b5c64f3cb8dc247e_143597_300x0_resize_box_2.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                

                
            </figure>
        
        <h1 class="site-name"><a href="https://jinyisland.kr">Jiny</a></h1>
        <h2 class="site-description">😎 승진이의 공부 블로그</h2>
    </header>
    <ol class="menu" id="main-menu">
        
        
        

        <li >
            <a href='/'>
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>Home</span>
            </a>
        </li>
        
        

        <li >
            <a href='/about'>
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>About</span>
            </a>
        </li>
        
        

        <li >
            <a href='/categories/frontend/'>
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-notebook" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ff9300" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M6 4h11a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-11a1 1 0 0 1 -1 -1v-14a1 1 0 0 1 1 -1m3 0v18" />
  <line x1="13" y1="8" x2="15" y2="8" />
  <line x1="13" y1="12" x2="15" y2="12" />
</svg>
                
                <span>Frontend</span>
            </a>
        </li>
        
        

        <li >
            <a href='/categories/backend/'>
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-notebook" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="#00b341" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M6 4h11a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-11a1 1 0 0 1 -1 -1v-14a1 1 0 0 1 1 -1m3 0v18" />
  <line x1="13" y1="8" x2="15" y2="8" />
  <line x1="13" y1="12" x2="15" y2="12" />
</svg>
                
                <span>Backend</span>
            </a>
        </li>
        
        

        <li >
            <a href='/categories/web/'>
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-notebook" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="#00abfb" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M6 4h11a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-11a1 1 0 0 1 -1 -1v-14a1 1 0 0 1 1 -1m3 0v18" />
  <line x1="13" y1="8" x2="15" y2="8" />
  <line x1="13" y1="12" x2="15" y2="12" />
</svg>
                
                <span>Web</span>
            </a>
        </li>
        
        

        <li >
            <a href='/categories/style/'>
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-notebook" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="#7f5345" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M6 4h11a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-11a1 1 0 0 1 -1 -1v-14a1 1 0 0 1 1 -1m3 0v18" />
  <line x1="13" y1="8" x2="15" y2="8" />
  <line x1="13" y1="12" x2="15" y2="12" />
</svg>
                
                <span>Style</span>
            </a>
        </li>
        
        

        <li >
            <a href='/categories/book/'>
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-notebook" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="#a905b6" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M6 4h11a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-11a1 1 0 0 1 -1 -1v-14a1 1 0 0 1 1 -1m3 0v18" />
  <line x1="13" y1="8" x2="15" y2="8" />
  <line x1="13" y1="12" x2="15" y2="12" />
</svg>
                
                <span>Book</span>
            </a>
        </li>
        
        

        <li >
            <a href='/categories/etc/'>
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-notebook" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="#d63031" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M6 4h11a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-11a1 1 0 0 1 -1 -1v-14a1 1 0 0 1 1 -1m3 0v18" />
  <line x1="13" y1="8" x2="15" y2="8" />
  <line x1="13" y1="12" x2="15" y2="12" />
</svg>
                
                <span>ETC</span>
            </a>
        </li>
        
        

        <li >
            <a href='/archives'>
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Categories</span>
            </a>
        </li>
        
        

        <li >
            <a href='/search'>
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        
            <li id="dark-mode-toggle">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                <span></span>
            </li>
        
    </ol>
</aside>
            <main class="main full-width">
    <div id="article-toolbar">
        <a href="https://jinyisland.kr" class="back-home">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="15 6 9 12 15 18" />
</svg>



            <span>Back</span>
        </a>
    </div>

    <article class="has-image main-article">
    <header class="article-header">
    <div class="article-image">
        <a href="/post/bundle-and-module/">
            
            <img src="../../assets/header/bundler-and-module.png" loading="lazy" alt="Featured image of post 번들러와 모듈 시스템" />
            
        </a>
    </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/frontend/" style="background-color: #ffeaa7; color: #000;">
                Frontend
            </a>
        
    </header>
    

    <h2 class="article-title">
        <a href="/post/bundle-and-module/">번들러와 모듈 시스템</a>
    </h2>

    
    <h3 class="article-subtitle">
        JavaScript에서 제공하는 모듈의 종류와 모듈을 묶어주는 번들러의 역할과 최적화 방법을 공유합니다.
    </h3>
    <footer class="article-time">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



        <time class="article-time--published">Nov 22, 2023</time>
    </footer></div>
</header>

    <section class="article-content js-toc-content">
    <div class="js-toc"></div>
    <p>오랜만에 글을 쓰네요~👋 프론트엔드 개발을 수행하다보면 Webpack, Rollup 등 여러 번들러들을 접해보시거나 들어보셨을 것입니다. 번들러 종류는 너무나 다양하고 동작하는 방식도 세세히 다르기도 합니다. 이 도구들의 역할은 무엇이고, JavaScript 모듈 시스템은 어떻게 구성해야 하는지 정리한 내용들을 공유해보도록 하겠습니다.</p>
<h2 id="모듈-시스템">모듈 시스템</h2>
<p>우선 지난번 <a class="link" href="https://jinyisland.kr/post/package-manager/"  target="_blank" rel="noopener"
    >패키지 매니저 돌아보기</a> 포스팅에서 JavaScript 모듈에 대해서 살짝 언급하고 넘어갔었는데요. 다시 한 번 간략히 알려드리자면 전역 공간을 최소화하기 위해 ESModules, CommonJS라는 방식의 모듈 시스템을 활용하여 독립적으로 스코프를 가지는 영역이라고 생각하시면 됩니다.</p>
<h3 id="commonjs">CommonJS</h3>
<p><code>CommonJS</code> 방식은 Node.js에서 기존 제공하였던 방식의 모듈 시스템입니다. <code>exports</code> 문법을 사용하여 함수, 객체 등을 내보낼 수 있고 내보내기 된 모듈은 <code>module wrapper</code>에 의해 함수로 변환되기 때문에 비공개 상태가 됩니다. 내보낸 모듈은 <code>require</code>로 불러올 수 있습니다. (JSON 파일도 취급 가능)</p>
<div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="c1">//calculator.js
</span><span class="c1"></span><span class="nx">exports</span><span class="p">.</span><span class="nx">sum</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">multiply</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">a</span> <span class="o">*</span> <span class="nx">b</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="kr">const</span> <span class="nx">calculator</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./calculator.js&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">employee</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../sample.json&#39;</span><span class="p">);</span>

<span class="nx">calculator</span><span class="p">.</span><span class="nx">sum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">employee</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
</code></pre></div><p><strong>module wrapper</strong><br>
이 방식은 <code>module wrapper</code>에 의해 평가되는데 내보내기된 모듈을 실행하기 전에 Node.js에서 다음과 같은 함수로 감싸게 됩니다. 이를 통해 모듈 내 최상위 변수들을 전역 스코프로 전파하는 것을 방지할 수 있습니다.</p>
<div class="highlight"><pre class="chroma"><code class="language-tsx" data-lang="tsx"><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">exports</span><span class="p">,</span> <span class="kr">require</span><span class="p">,</span> <span class="nx">module</span><span class="p">,</span> <span class="nx">__filename</span><span class="p">,</span> <span class="nx">__dirname</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Module code actually lives in here
</span><span class="c1"></span><span class="p">});</span>
</code></pre></div><p><strong>CommonJS로 취급할 수 있는 상황</strong><br>
기본적으로 Node.js에서 다음과 같은 상황에서 CommonJS 모듈 방식으로 취급합니다.</p>
<ul>
<li>.cjs 확장자를 가진 파일</li>
<li>가장 가까운 상위 package.json내 type이 <code>commonjs</code> 값으로 설정되어있는 범위</li>
</ul>
<p><strong>동기적 특성</strong><br>
CommonJS에서 <code>require</code> 문법은 동기적인 특징을 가지고 있습니다. 모듈 코드를 읽은 다음 즉시 스크립트를 실행하여 <code>module.exports</code>에 설정된 값을 반환합니다. 따라서 항상 최상위에 위치하지 않아도 됩니다. 또한 모듈은 처음 로드된 이후에 캐싱되기 때문에 내보낸 모듈이 변경되더라도 변경된 값을 항상 참조하지 않습니다.</p>
<h3 id="esmodules">ESModules</h3>
<p>CommonJS는 Node.js 진영에서 사용된 방식입니다. 반면 ESModules는 ECMA Script에서 공식 표준으로 등장한 모듈 방식으로 브라우저에서도 사용 가능하다는 장점이 있고 <code>import</code>와 <code>export</code>를 사용하여 모듈을 내보내거나 불러올 수 있습니다.</p>
<div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="c1">//calculator.js
</span><span class="c1"></span><span class="kr">export</span> <span class="kr">const</span> <span class="nx">sum</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
<span class="kr">export</span> <span class="kr">const</span> <span class="nx">multiply</span> <span class="p">=&gt;</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">a</span> <span class="o">*</span> <span class="nx">b</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="kr">import</span> <span class="p">{</span> <span class="nx">sum</span><span class="p">,</span> <span class="nx">multiply</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./calculator.js&#39;</span><span class="p">;</span>

<span class="nx">sum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</code></pre></div><p><strong>ESModules로 취급할 수 있는 상황</strong></p>
<ul>
<li>.mjs 확장자를 가진 파일</li>
<li>가장 가까운 상위 package.json내 type이 <code>module</code> 값으로 설정되어있는 범위</li>
</ul>
<p><strong>assertions</strong></p>
<p>ESModules 환경에서 JSON 파일을 불러오려면 모듈 로더에게 <code>JSON</code> 파일임을 알려주어야 하는데 <code>assert</code> 키워드로 명시할 수 있습니다.</p>
<div class="highlight"><pre class="chroma"><code class="language-tsx" data-lang="tsx"><span class="kr">import</span> <span class="nx">employee</span> <span class="kr">from</span> <span class="s1">&#39;./sample.json&#39;</span> <span class="nx">assert</span> <span class="p">{</span> <span class="kr">type</span><span class="o">:</span> <span class="s1">&#39;json&#39;</span> <span class="p">};</span>
</code></pre></div><p><strong>비동기적 특성</strong></p>
<p>ESModule에서의 모듈 로더는 비동기 방식으로 실행됩니다. CommonJS와 달리 브라우저에서도 모듈을 이해해야 하기 때문에 별도의 과정이 필요합니다. 불러온 스크립트를 즉시 실행하지 않고 구문 분석을 하여 문제가 있는 경우 예외 처리를 수행합니다.</p>
<p>이후에 종속성 그래프를 작성하고 형제 관계에 있는 모듈들은 기본적으로 병렬로 다운로드합니다. 이 과정은 아무것도 가져오지 않는 <code>import</code> 스크립트를 찾을 때까지 반복하고 최종적으로 브라우저가 이해할 수 있는 **모듈 레코드(module record)**로 변환합니다. 이러한 특성 때문에 <code>import</code> 구문은 항상 코드의 최상위에 위치해야하는 제약 사항이 있습니다.</p>
<p><strong>동적 Import</strong></p>
<p><code>import()</code>은 ESModule 환경이 아닌 곳(CommonJS)에서도 모듈을 사용할 수 있도록 하는 함수와 유사한 표현식입니다. 이 함수는 해당 경로의 모든 모듈을 포함한 객체를 내보내는 Promise를 반환합니다. 또한, ESModule 로더가 아니기 때문에 코드 어디에서든 동적으로 사용할 수 있습니다. 이러한 특성을 Dynamic Import(동적 불러오기)라고 표현합니다.</p>
<div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="c1">//index.js
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">callAdd</span> <span class="o">=</span> <span class="kr">async</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="p">{</span> <span class="nx">add</span> <span class="p">}</span> <span class="o">=</span> <span class="kr">await</span> <span class="kr">import</span><span class="p">(</span><span class="s1">&#39;./calc.mjs&#39;</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">add</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">));</span>
<span class="p">};</span>

<span class="kr">const</span> <span class="nx">employee</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../sample.json&#39;</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">employee</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
<span class="nx">callAdd</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</code></pre></div><h3 id="dual-package">Dual Package</h3>
<p>자 사용자의 프로젝트 환경은 CommonJS 방식일수도 있고 ESModules 방식일수도 있습니다. 만약 모듈을 배포하려고 하는데 두 모듈 로더에서 동작하게 하려면 어떻게 해야할까요?</p>
<p>기존에는 개발자가 각 모듈에 해당하는 소스를 모두 포함하는 것이 일반적이었습니다.</p>
<div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="err">//package.json</span>
<span class="p">{</span>
  <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;some-module&#34;</span><span class="p">,</span>
	<span class="err">...</span>
  <span class="nt">&#34;main&#34;</span><span class="p">:</span> <span class="s2">&#34;dist/cjs/index.cjs&#34;</span><span class="p">,</span> <span class="err">//CJS</span> <span class="err">Entry</span>
  <span class="nt">&#34;module&#34;</span><span class="p">:</span> <span class="s2">&#34;dist/esm/index.mjs&#34;</span><span class="p">,</span> <span class="err">//ESM</span> <span class="err">Entry</span>
	<span class="err">...</span>
<span class="p">}</span>
</code></pre></div><p>하지만 현재에는 <code>exports</code> 필드를 명시하여 모듈 로더에 따라 진입점을 분기시켜 이중 패키지 환경을 제공할 수 있게되었습니다.</p>
<div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
	<span class="err">..</span>
  <span class="nt">&#34;exports&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;import&#34;</span><span class="p">:</span> <span class="s2">&#34;./dist/index.mjs&#34;</span><span class="p">,</span> <span class="err">//ESModule</span> <span class="err">진입점</span> <span class="err">파일</span>
    <span class="nt">&#34;require&#34;</span><span class="p">:</span> <span class="s2">&#34;./dist/index.cjs&#34;</span> <span class="err">//CommonJS</span> <span class="err">진입점</span> <span class="err">파일</span>
  <span class="p">},</span>
<span class="p">}</span>
</code></pre></div><h3 id="dual-package-hazard">Dual Package Hazard</h3>
<p>모듈 제작시 코드내에서 CommonJS와 ESModules 두 모듈 방식이 포함된 패키지나 모듈을 동일한 런타임 환경에서 로드 되면 특정 버그가 발생하는 위험성이 있습니다. 이를 <a class="link" href="https://nodejs.org/api/packages.html#dual-package-hazard"  target="_blank" rel="noopener"
    >이중 패키지 위험(Dual Package Hazard)</a>라고 합니다. 이를 방지하려면 설정된 모듈 타입에 따라 단일 방식으로 작성하며 사용하는 측에 두 방식으로 명시적으로 제공 할 필요가 있습니다.</p>
<div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
	<span class="err">..</span>
  <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;module&#34;</span><span class="p">,</span>
  <span class="nt">&#34;exports&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;import&#34;</span><span class="p">:</span> <span class="s2">&#34;./dist/wrapper.mjs&#34;</span><span class="p">,</span> <span class="err">//ESModule</span> <span class="err">진입점</span> <span class="err">경로</span>
    <span class="nt">&#34;require&#34;</span><span class="p">:</span> <span class="s2">&#34;./dist/index.cjs&#34;</span> <span class="err">//CommonJS</span> <span class="err">진입점</span> <span class="err">경로</span>
  <span class="p">},</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="c1">// 📂 src/index.cjs
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">calc</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./calc.js&#39;</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">resultOfAdd</span> <span class="o">=</span> <span class="nx">calc</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">resultOfSubtract</span> <span class="o">=</span> <span class="nx">calc</span><span class="p">.</span><span class="nx">subtract</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">resultOfAdd</span><span class="p">,</span> <span class="nx">resultOfSubtract</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="c1">// 📂 src/wrapper.mjs
</span><span class="c1"></span><span class="kr">import</span> <span class="nx">cjsModule</span> <span class="nx">from</span> <span class="s1">&#39;./index.cjs&#39;</span><span class="p">;</span>

<span class="kr">export</span> <span class="kr">const</span> <span class="nx">calc</span> <span class="o">=</span> <span class="nx">cjsModule</span><span class="p">.</span><span class="nx">calc</span><span class="p">;</span>
</code></pre></div><ul>
<li>만약 기존 패키지 환경이 CommonJS인 경우 위의 코드 처럼 전체 코드를 ESModule 방식으로 변환 시키지 않고 별도의 랩퍼 파일을 통해 내보내면 두 가지 모듈 방식을 사용할 수 있습니다.</li>
<li>새로 개발해야하는 상황 일 경우 패키지 내 <code>exports</code> 속성을 통해 명확히 빌드 파일 경로를 입력해주는 것이 중요합니다.</li>
</ul>
<h2 id="번들러란-무엇인가">번들러란 무엇인가?</h2>
<p>모듈을 만들었으면 사용자들이 사용할 수 있도록 내보내는 과정도 필요합니다. 개발 과정에서 단일 파일로 개발하시는 경우는 극히 드물 것입니다. 그리고 모듈이 아니라 애플리케이션 개발이라면 스크립트 파일 뿐만 아니라 이미지 등 각종 리소스들도 포함시키는 경우도 있습니다. 이를 단일 파일로 합쳐주는 과정이 필요한데 이를 번들러라는 도구가 수행하고 있습니다.</p>
<h3 id="번들러의-역할">번들러의 역할</h3>
<p>Webpack, Rollup, Vite 등 여러 번들러 도구들이 있으며, 이들은 공통적으로 다양한 기능을 제공합니다. 번들링의 기본적인 역할을 소개해 드리겠습니다.</p>
<ul>
<li>분리된 여러 자바스크립트 파일 또는 모듈을 단일 파일로 정리하고 결합 (스크립트 파일을 최대한 압축하고 작은 파일로 통합)</li>
<li>페이지 방문시 파일 요청 횟수를 최소화 (웹 페이지에서 필요한 스크립트 파일이 많을수록 응답시간도 비례해서 늘어남)</li>
<li>프론트엔드 개발에서 잦은 빌드 결과물 확인이 필요 → 다시 빌드 할 필요 없이 업데이트된 코드들을 즉시 반영</li>
<li>실제로 사용하지 않는 코드들을 제거하여 빌드 용량 최적화 (TreeShaking)</li>
<li>번들에 포함된 여러 모듈들을 분리하여 실제 사용하는 곳에서만 요청하여 수신 속도와 파싱 시간 최적화 (Code Splitting)</li>
</ul>
<p>모든 번들러 도구에 대한 사용법을 설명하는 것은 어렵기 때문에, 상대적으로 유명한 Webpack과 Rollup을 통해 이 과정을 소개하겠습니다. 일반적으로 Webpack은 많은 참고 자료가 있으며 프로덕션 빌드에 많이 사용되고, Rollup은 라이브러리 형태의 모듈 제작에 주로 사용됩니다.</p>
<h3 id="webpack">Webpack</h3>
<p><strong>Entry</strong><br>
웹팩에서 번들링할 애플리케이션을 이해하기 위해서는 필요한 애플리케이션의 진입점을 나타내는 파일이 있어야 합니다. 대개 <code>SPA</code> 방식에서는 진입점을 한 개로 두는 것이 일반적이지만, <code>MPA</code> 환경에서는 특정 페이지에서 내려주는 파일이 다를 수 있기 때문에 여러 개의 진입점을 둘 수 있습니다.</p>
<div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">entry</span><span class="o">:</span> <span class="s1">&#39;./src/index.js&#39;</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="nx">entry</span><span class="o">:</span> <span class="p">{</span>
  <span class="nx">login</span><span class="o">:</span> <span class="s1">&#39;./src/LoginView.js&#39;</span><span class="p">,</span>
  <span class="nx">main</span><span class="o">:</span> <span class="s1">&#39;./src/MainView.js&#39;</span>
<span class="p">}</span>
</code></pre></div><p><strong>output</strong></p>
<p>번들을 내보낼 위치와 번들링 후 파일의 이름을 지정합니다.</p>
<div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">entry</span><span class="o">:</span> <span class="s1">&#39;./src/index.js&#39;</span><span class="p">,</span>
  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">chunkFormat</span><span class="o">:</span> <span class="s1">&#39;module&#39;</span><span class="p">,</span> <span class="c1">//모듈 방식 CommonJS, ESModule(기본: array-push)
</span><span class="c1"></span>    <span class="nx">path</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;dist&#39;</span><span class="p">),</span> <span class="c1">//번들링될 위치
</span><span class="c1"></span>    <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;webpack-bundle.js&#39;</span><span class="p">,</span> <span class="c1">//번들링된 파일의 이름
</span><span class="c1"></span>    <span class="nx">clean</span><span class="o">:</span> <span class="kc">true</span> <span class="c1">//번들링을 수행하기 전에 output 디렉터리를 클린업
</span><span class="c1"></span>  <span class="p">}</span>
<span class="p">};</span>
</code></pre></div><p><strong>Loader</strong></p>
<p>웹팩은 기본적으로 자바스크립트 파일과 JSON 형식만 번들러 대상으로 인지할 수 있습니다. 이외의 다양한 파일 유형과 환경은 로더를 통해 번들링을 수행할 수 있습니다.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># 만약 css 번들링과 ts 번들링이 필요하다면 다음 두 로더를 설치</span>
npm install -D css-loader ts-loader
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span> <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.css$/</span><span class="p">,</span> <span class="nx">use</span><span class="o">:</span> <span class="s1">&#39;css-loader&#39;</span> <span class="p">},</span> <span class="c1">//.css 확장자 파일은 css-loader를 활용해 번들링 수행
</span><span class="c1"></span>      <span class="p">{</span> <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.ts$/</span><span class="p">,</span> <span class="nx">use</span><span class="o">:</span> <span class="s1">&#39;ts-loader&#39;</span> <span class="p">}</span> <span class="c1">//.ts 확장자 파일은 ts-loader를 활용해 번들링 수행
</span><span class="c1"></span>    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></div><p>자주 사용하는 로더</p>
<ul>
<li><strong>file-loader:</strong> 다양한 파일 포맷</li>
<li><strong>ts-loader:</strong> 타입스크립트</li>
<li><strong>babel-loader</strong>: Babel 트랜스파일링</li>
<li><strong>css-loader</strong>: css</li>
</ul>
<p><strong>💡 중요! 로더 적용 순서는 오른쪽에서 왼쪽 순으로 적용됩니다.</strong><br>
예를들어, 아래와 같이 <code>scss</code> 확장자는 SASS 로더로 css로 변환한다음 변환한 css를 최종적으로 번들링합니다.</p>
<div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
  <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.scss$/</span><span class="p">,</span>
      <span class="nx">use</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;css-loader&#39;</span><span class="p">,</span> <span class="s1">&#39;sass-loader&#39;</span><span class="p">]</span> <span class="c1">//sass -&gt; css
</span><span class="c1"></span>    <span class="p">}</span>
  <span class="p">];</span>
<span class="p">}</span>
</code></pre></div><p><strong>Plugin</strong></p>
<p>로더는 다양한 파일 유형에 대해 번들링을 제공하는 역할이라면 플러그인은 번들링 결과물에 다양한 후처리를 수행하는 기능입니다. 여러 플러그인이 존재하며 대표적으로 <code>HtmlWebpackPlugin</code> 플러그인이 있습니다. <strong>(빌드한 결과물을 HTML에 포함시키는 플러그인)</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
    <span class="k">new</span> <span class="nx">HtmlWebpackPlugin</span><span class="p">({</span>
      <span class="nx">template</span><span class="o">:</span> <span class="s1">&#39;./public/index.html&#39;</span>
    <span class="p">})</span>
  <span class="p">]</span>
<span class="p">};</span>
</code></pre></div><p><strong>Code Splitting</strong></p>
<p>웹팩에서는 <code>entry</code> 속성 또는 <code>SplitChunkPlugin</code>을 통해 코드 스플릿팅을 수행할 수 있습니다.</p>
<ol>
<li>
<p>entry를 사용한 코드 스플릿팅</p>
<div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;development&#39;</span><span class="p">,</span> <span class="c1">// default: production (생략 가능)
</span><span class="c1"></span>  <span class="nx">entry</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">index</span><span class="o">:</span> <span class="s1">&#39;./src/index.js&#39;</span><span class="p">,</span>
    <span class="nx">module</span><span class="o">:</span> <span class="s1">&#39;./src/module.js&#39;</span>
  <span class="p">},</span>
  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;[name].bundle.js&#39;</span><span class="p">,</span>
    <span class="nx">chunkFormat</span><span class="o">:</span> <span class="s1">&#39;commonjs&#39;</span><span class="p">,</span>
    <span class="nx">path</span><span class="o">:</span> <span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;dist&#39;</span><span class="p">),</span> <span class="c1">// __dirname: 현재 디렉토리
</span><span class="c1"></span>    <span class="nx">clean</span><span class="o">:</span> <span class="kc">true</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></div><p>해당 방식에서는 단점이 존재합니다. 분리된 모듈 사이에서 중복된 모듈이 존재한다면, 동시에 번들에 포함되는 문제가 발생할 수 있습니다. 예를 들어, index와 module파일에서 lodash 라이브러리를 사용하고 있다면, 두 파일 모두 lodash 번들링이 포함되어 용량이 늘어나게 됩니다.
<img src="https://github.com/yondo123/yondo123.github.io/assets/46988995/03da44a1-c239-4275-b8f5-c7b0522b5ccb" alt="01-entry-code-splitting"  /></p>
</li>
<li>
<p>SplitChunkPlugin을 사용한 코드 스플릿팅</p>
<p>SplitChunkPlugin을 사용하면 자동으로 기본 옵션에 따라 청크들을 분리합니다.</p>
<div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
 <span class="p">...</span>
  <span class="nx">optimization</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">splitChunks</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">chunks</span><span class="o">:</span> <span class="s1">&#39;all&#39;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></div><p>SplitChunk 기본 옵션</p>
<ul>
<li>새 청크를 공유 할 수 있거나 모듈이 <code>node_modules</code> 폴더에 있는 경우</li>
<li>새 청크가 20kb보다 클 경우</li>
<li>요청 시 청크를 로드할 때 최대 병렬 요청 수가 30개 이하일 경우</li>
<li>초기 페이지 로드 시 최대 병렬 요청 수가 30개 이하일 경우
<div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="c1">//기본 SplitChuckPlugin 설정 값
</span><span class="c1"></span><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="c1">//...
</span><span class="c1"></span>  <span class="nx">optimization</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">splitChunks</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">chunks</span><span class="o">:</span> <span class="s1">&#39;async&#39;</span><span class="p">,</span> <span class="c1">//최적화를 수행시킬 청크의 유형 (all, async, sync)
</span><span class="c1"></span>      <span class="nx">minSize</span><span class="o">:</span> <span class="mi">20000</span><span class="p">,</span> <span class="c1">//생성할 청크의 최소 byte (이 보다 작으면 분할되지 않음)
</span><span class="c1"></span>      <span class="nx">minChunks</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="c1">//모듈이 분할 전에 청크 간 재사용하는 횟수 (1개 이상 청크에서 재사용)
</span><span class="c1"></span>      <span class="nx">maxAsyncRequests</span><span class="o">:</span> <span class="mi">30</span><span class="p">,</span> <span class="c1">//비동기로 로드될 수 있는 최대 청크 수
</span><span class="c1"></span>      <span class="nx">maxInitialRequests</span><span class="o">:</span> <span class="mi">30</span><span class="p">,</span> <span class="c1">//초기 페이지 로드 시 요청될 수 있는 최대 청크 수
</span><span class="c1"></span>      <span class="nx">enforceSizeThreshold</span><span class="o">:</span> <span class="mi">50000</span><span class="p">,</span> <span class="c1">//강제로 분할시키기 위한 최대 byte 임계값
</span><span class="c1"></span>      <span class="nx">cacheGroups</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">defaultVendors</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">test</span><span class="o">:</span> <span class="sr">/[\\/]node_modules[\\/]/</span><span class="p">,</span> <span class="c1">//대상 경로
</span><span class="c1"></span>          <span class="nx">priority</span><span class="o">:</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="c1">//캐시 그룹간의 우선순위 (값이 높을수록 높은 우선순위)
</span><span class="c1"></span>          <span class="nx">reuseExistingChunk</span><span class="o">:</span> <span class="kc">true</span> <span class="c1">//존재하는 청크를 재사용할지에 대한 여부
</span><span class="c1"></span>        <span class="p">},</span>
        <span class="k">default</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">minChunks</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="c1">//청크 분할에 관한 최소 청크 개수
</span><span class="c1"></span>          <span class="nx">priority</span><span class="o">:</span> <span class="o">-</span><span class="mi">20</span><span class="p">,</span> <span class="c1">//우선 순위 설
</span><span class="c1"></span>          <span class="nx">reuseExistingChunk</span><span class="o">:</span> <span class="kc">true</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></div><p><img src="https://github.com/yondo123/yondo123.github.io/assets/46988995/3e675cb1-b80c-4260-a2c5-7781ae137c86" alt="splitchunkplugin-code-splitting"  /></p>
</li>
</ul>
</li>
</ol>
<p>위의 내용을 종합하여 자바스크립트로 기본적인 웹 동작을 수행하는 Webpack 환경을 구성해봅시다.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">npm i -D webpack webapck-cli <span class="c1">#webpack</span>
npm i -D webapck-dev-server css-loader style-laoder <span class="c1">#webpack plugins</span>
npm i -D babel-loader @babel/cli @babel/core @babel/preset-env <span class="c1">#transfile</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="c1">//webpack.config.js
</span><span class="c1"></span><span class="kr">import</span> <span class="nx">path</span><span class="p">,</span> <span class="p">{</span> <span class="nx">resolve</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;path&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">fileURLToPath</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;url&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">HtmlWebpackPlugin</span> <span class="nx">from</span> <span class="s1">&#39;html-webpack-plugin&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">CleanWebpackPlugin</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;clean-webpack-plugin&#39;</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">__filename</span> <span class="o">=</span> <span class="nx">fileURLToPath</span><span class="p">(</span><span class="kr">import</span><span class="p">.</span><span class="nx">meta</span><span class="p">.</span><span class="nx">url</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">__dirname</span> <span class="o">=</span> <span class="nx">path</span><span class="p">.</span><span class="nx">dirname</span><span class="p">(</span><span class="nx">__filename</span><span class="p">);</span>

<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;development&#39;</span><span class="p">,</span>
  <span class="nx">entry</span><span class="o">:</span> <span class="s1">&#39;./src/app.js&#39;</span><span class="p">,</span>
  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;bundle.js&#39;</span><span class="p">,</span>
    <span class="nx">path</span><span class="o">:</span> <span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;dist&#39;</span><span class="p">),</span>
    <span class="nx">clean</span><span class="o">:</span> <span class="kc">true</span>
  <span class="p">},</span>
  <span class="nx">resolve</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">extensions</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;.js&#39;</span><span class="p">,</span> <span class="s1">&#39;.css&#39;</span><span class="p">]</span>
  <span class="p">},</span>
  <span class="nx">devServer</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">port</span><span class="o">:</span> <span class="mi">8088</span><span class="p">,</span>
    <span class="nx">open</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">hot</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">watchFiles</span><span class="o">:</span> <span class="s1">&#39;./src/**/*&#39;</span> <span class="c1">//Hot Reload를 위한 감시자 설정
</span><span class="c1"></span>  <span class="p">},</span>
  <span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.js$/</span><span class="p">,</span>
        <span class="nx">exclude</span><span class="o">:</span> <span class="sr">/node_modules/</span><span class="p">,</span>
        <span class="nx">use</span><span class="o">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="nx">loader</span><span class="o">:</span> <span class="s1">&#39;babel-loader&#39;</span><span class="p">,</span>
            <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
              <span class="nx">presets</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;@babel/preset-env&#39;</span><span class="p">]</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">]</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.css$/</span><span class="p">,</span>
        <span class="nx">use</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;style-loader&#39;</span><span class="p">,</span> <span class="s1">&#39;css-loader&#39;</span><span class="p">]</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
    <span class="k">new</span> <span class="nx">CleanWebpackPlugin</span><span class="p">(),</span>
    <span class="k">new</span> <span class="nx">HtmlWebpackPlugin</span><span class="p">({</span>
      <span class="nx">template</span><span class="o">:</span> <span class="s1">&#39;./src/assets/index.html&#39;</span>
    <span class="p">})</span>
  <span class="p">]</span>
<span class="p">};</span>
</code></pre></div><h3 id="rollup">Rollup</h3>
<p>Rollup은 다음과 같은 특징을 가지고 있습니다.</p>
<ul>
<li>편리한 감시자 옵션을 제공합니다.</li>
<li>ESModules 방식을 사용합니다.</li>
<li><code>Webpack</code>에 비해 기본적으로 생성되는 코드의 양이 적습니다.</li>
<li>독립된 작은 단위로 번들링을 수행하기 쉽고, 다양한 번들 형식을 지원하여 라이브러리 배포에 수월합니다.</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="c1">//rollup.config.js
</span><span class="c1"></span><span class="kr">import</span> <span class="nx">commonjs</span> <span class="nx">from</span> <span class="s1">&#39;@rollup/plugin-commonjs&#39;</span><span class="p">;</span>

<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">input</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">module</span><span class="o">:</span> <span class="s1">&#39;src/module.js&#39;</span><span class="p">,</span>
    <span class="nx">index</span><span class="o">:</span> <span class="s1">&#39;src/index.js&#39;</span>
  <span class="p">},</span>
  <span class="nx">output</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nx">dir</span><span class="o">:</span> <span class="s1">&#39;rollup&#39;</span><span class="p">,</span>
      <span class="nx">entryFileNames</span><span class="o">:</span> <span class="s1">&#39;[name].bundle.mjs&#39;</span><span class="p">,</span>
      <span class="nx">format</span><span class="o">:</span> <span class="s1">&#39;es&#39;</span> <span class="c1">//ESM
</span><span class="c1"></span>    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nx">dir</span><span class="o">:</span> <span class="s1">&#39;rollup&#39;</span><span class="p">,</span>
      <span class="nx">entryFileNames</span><span class="o">:</span> <span class="s1">&#39;[name].bundle.cjs&#39;</span><span class="p">,</span>
      <span class="nx">format</span><span class="o">:</span> <span class="s1">&#39;cjs&#39;</span> <span class="c1">//CommonJS
</span><span class="c1"></span>    <span class="p">}</span>
  <span class="p">],</span>
  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span><span class="nx">commonjs</span><span class="p">()]</span>
<span class="p">};</span>
</code></pre></div><p><strong>Input</strong><br>
번들 대상의 진입점(entry)을 설정합니다. 배열 또는 이름을 맵핑하는 객체를 지정하면 청크로 쪼개어 번들링됩니다.</p>
<div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="c1">//rollup.config.js
</span><span class="c1"></span><span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">input</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">module</span><span class="o">:</span> <span class="s1">&#39;src/module.js&#39;</span><span class="p">,</span>
    <span class="nx">index</span><span class="o">:</span> <span class="s1">&#39;src/index.js&#39;</span>
  <span class="p">},</span>
	<span class="p">...</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">rollup -c  <span class="c1">#rollup.config.js</span>
rollup -cw <span class="c1">#whatcher</span>
</code></pre></div><p><strong>Output</strong><br>
번들링된 결과물에 대한 설정 입니다. 번들 위치와 모듈 형식을 지정할 수 있습니다.</p>
<ul>
<li><strong>format:</strong> 번들의 파일 형식을 지정할 수 있습니다. (cjs, es, amd, iife, umd, system)</li>
<li><strong>dir:</strong> 생성된 번들의 위치를 지정합니다.</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="c1">//rollup.config.js
</span><span class="c1"></span><span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">input</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">module</span><span class="o">:</span> <span class="s1">&#39;src/module.js&#39;</span><span class="p">,</span>
    <span class="nx">index</span><span class="o">:</span> <span class="s1">&#39;src/index.js&#39;</span>
  <span class="p">},</span>
  <span class="nx">output</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nx">dir</span><span class="o">:</span> <span class="s1">&#39;rollup&#39;</span><span class="p">,</span>
      <span class="nx">entryFileNames</span><span class="o">:</span> <span class="s1">&#39;[name].bundle.mjs&#39;</span><span class="p">,</span>
      <span class="nx">format</span><span class="o">:</span> <span class="s1">&#39;es&#39;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nx">dir</span><span class="o">:</span> <span class="s1">&#39;rollup&#39;</span><span class="p">,</span>
      <span class="nx">entryFileNames</span><span class="o">:</span> <span class="s1">&#39;[name].bundle.cjs&#39;</span><span class="p">,</span>
      <span class="nx">format</span><span class="o">:</span> <span class="s1">&#39;cjs&#39;</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span><span class="nx">commonjs</span><span class="p">()]</span>
<span class="p">};</span>
</code></pre></div><p><strong>PreserveModules</strong><br>
각 모듈 파일을 단일로 합치지 않고 개별적으로 보존하는 방식으로 번들링을 수행합니다. 예상된 export 모듈이 누락될 수 있기 때문에 무작정 사용하는 것은 좋지 않습니다.
<img src="https://github.com/yondo123/yondo123.github.io/assets/46988995/d73fa9fb-7c3d-406c-8266-9b8ae7249e08" alt="preserve-modules-true"  />
<em>옵션 활성화시 단일 파일로 빌드하지 않습니다.</em>
<img src="https://github.com/yondo123/yondo123.github.io/assets/46988995/e9871c6b-83e9-4bd9-b9c7-d30a461b99e9" alt="preserve-modules-false"  />
<em>옵션 활성화시 단일 파일로 빌드됩니다.</em></p>
<p><strong>external</strong><br>
모듈이 의존하고 있는 라이브러리등을 지정하여 최종 번들에 포함하지 않는 속성 입니다.</p>
<div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">external</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;lodash&#39;</span><span class="p">],</span>
  <span class="nx">input</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">module</span><span class="o">:</span> <span class="s1">&#39;src/module.js&#39;</span><span class="p">,</span>
    <span class="nx">index</span><span class="o">:</span> <span class="s1">&#39;src/index.js&#39;</span>
  <span class="p">},</span>
  <span class="nx">output</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nx">dir</span><span class="o">:</span> <span class="s1">&#39;rollup&#39;</span><span class="p">,</span>
      <span class="nx">entryFileNames</span><span class="o">:</span> <span class="s1">&#39;[name].bundle.mjs&#39;</span><span class="p">,</span>
      <span class="nx">format</span><span class="o">:</span> <span class="s1">&#39;es&#39;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nx">dir</span><span class="o">:</span> <span class="s1">&#39;rollup&#39;</span><span class="p">,</span>
      <span class="nx">entryFileNames</span><span class="o">:</span> <span class="s1">&#39;[name].bundle.cjs&#39;</span><span class="p">,</span>
      <span class="nx">format</span><span class="o">:</span> <span class="s1">&#39;cjs&#39;</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">};</span>
</code></pre></div><p><strong>Plugins</strong><br>
롤업에서도 다양한 플러그인을 지원합니다.
<a class="link" href="https://github.com/rollup/awesome"  target="_blank" rel="noopener"
    >플러그인 목록 바로가기</a></p>
<ul>
<li><strong><a class="link" href="https://github.com/rollup/plugins/tree/master/packages/commonjs"  target="_blank" rel="noopener"
    >commonjs</a>:</strong> CJS 방식으로 작성된 모듈을 ESM 방식으로 번들링</li>
<li><strong><a class="link" href="https://github.com/rollup/plugins/tree/master/packages/babel"  target="_blank" rel="noopener"
    >babel</a>:</strong> <code>Babel</code> 트랜스파일 지원</li>
<li><strong><a class="link" href="https://github.com/vladshcherbin/rollup-plugin-delete"  target="_blank" rel="noopener"
    >delete</a>:</strong> 번들링 수행 전 클린업 (output 디렉토리 삭제)</li>
<li><strong><a class="link" href="https://github.com/mentaljam/rollup-plugin-html2"  target="_blank" rel="noopener"
    >html</a>:</strong> <code>html</code> 형식으로 번들링</li>
<li><strong><a class="link" href="https://github.com/egoist/rollup-plugin-postcss"  target="_blank" rel="noopener"
    >postcss</a>:</strong> CSS 변환 역할을 수행하는 <code>PostCSS</code> 지원</li>
<li><strong><a class="link" href="https://github.com/thgh/rollup-plugin-serve"  target="_blank" rel="noopener"
    >serve</a>:</strong> 로컬 서버 환경을 지원</li>
<li><strong><a class="link" href="https://github.com/TrySound/rollup-plugin-terser"  target="_blank" rel="noopener"
    >terser</a>:</strong> <code>terser</code> 압축기를 사용하여 번들 사이즈 최적화</li>
</ul>
<p><strong>CodeSplitting</strong><br>
Rollup에서는 기본적으로 다중 진입 파일 또는 동적 로딩 상황에서 자동으로 모듈 코드를 여러 청크로 분할합니다. 수동으로 지정하고 싶다면 <code>output.manualChunks</code> 옵션을 통해 모듈을 분리시킬 수 있습니다.</p>
<div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="kr">import</span> <span class="p">{</span> <span class="nx">nodeResolve</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@rollup/plugin-node-resolve&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">commonjs</span> <span class="nx">from</span> <span class="s1">&#39;@rollup/plugin-commonjs&#39;</span><span class="p">;</span>

<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">input</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">module</span><span class="o">:</span> <span class="s1">&#39;src/module.js&#39;</span><span class="p">,</span>
    <span class="nx">index</span><span class="o">:</span> <span class="s1">&#39;src/index.js&#39;</span>
  <span class="p">},</span>
  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">dir</span><span class="o">:</span> <span class="s1">&#39;rollup&#39;</span><span class="p">,</span>
    <span class="nx">entryFileNames</span><span class="o">:</span> <span class="s1">&#39;[name].bundle.js&#39;</span><span class="p">,</span>
    <span class="nx">format</span><span class="o">:</span> <span class="s1">&#39;es&#39;</span><span class="p">,</span>
    <span class="nx">manualChunks</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">lodash</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;lodash&#39;</span><span class="p">]</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span><span class="nx">nodeResolve</span><span class="p">(),</span> <span class="nx">commonjs</span><span class="p">()]</span>
<span class="p">};</span>
</code></pre></div><p>마찬가지로 Rollup에서도 기본적인 웹 페이지를 구성하는 환경 설정을 작성해보았습니다.</p>
<div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="c1">//rollup.config.js
</span><span class="c1"></span><span class="kr">import</span> <span class="nx">html2</span> <span class="nx">from</span> <span class="s1">&#39;rollup-plugin-html2&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">serve</span> <span class="nx">from</span> <span class="s1">&#39;rollup-plugin-serve&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">copy</span> <span class="nx">from</span> <span class="s1">&#39;rollup-plugin-copy-assets&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">postcss</span> <span class="nx">from</span> <span class="s1">&#39;rollup-plugin-postcss&#39;</span><span class="p">;</span>

<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">input</span><span class="o">:</span> <span class="s1">&#39;./src/app.js&#39;</span><span class="p">,</span>
  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">dir</span><span class="o">:</span> <span class="s1">&#39;rollup&#39;</span><span class="p">,</span>
    <span class="nx">entryFileNames</span><span class="o">:</span> <span class="s1">&#39;bundle.js&#39;</span><span class="p">,</span>
    <span class="nx">format</span><span class="o">:</span> <span class="s1">&#39;iife&#39;</span><span class="p">,</span>
    <span class="nx">sourcemap</span><span class="o">:</span> <span class="kc">true</span>
  <span class="p">},</span>
  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
    <span class="nx">html2</span><span class="p">({</span>
      <span class="nx">template</span><span class="o">:</span> <span class="s1">&#39;./src/assets/index.html&#39;</span>
    <span class="p">}),</span>
    <span class="nx">postcss</span><span class="p">({</span>
      <span class="nx">extensions</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;.css&#39;</span><span class="p">]</span>
    <span class="p">}),</span>
    <span class="nx">copy</span><span class="p">({</span>
      <span class="nx">assets</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;src/constants&#39;</span><span class="p">]</span>
    <span class="p">}),</span>
    <span class="nx">serve</span><span class="p">({</span>
      <span class="nx">open</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nx">openPage</span><span class="o">:</span> <span class="s1">&#39;/rollup/index.html&#39;</span><span class="p">,</span>
      <span class="nx">port</span><span class="o">:</span> <span class="mi">9000</span><span class="p">,</span>
      <span class="nx">contentBase</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;rollup&#39;</span><span class="p">,</span> <span class="s1">&#39;.&#39;</span><span class="p">]</span>
    <span class="p">})</span>
  <span class="p">]</span>
<span class="p">};</span>
</code></pre></div><h2 id="treeshaking">TreeShaking</h2>
<p>트리쉐이킹은 완성된 코드에서 필요하지 않은 부분을 삭제하는 것이 아니라, 실제 사용되는 코드만 포함시켜 논리적으로 사용하지 않는 코드를 포함시키지 않는 것을 말합니다. 이는 마치 나무를 흔들어 죽은 나뭇잎을 떨어트리는 행위에 비유되어 &lsquo;TreeShaking&rsquo;이라고 불립니다.</p>
<h3 id="treeshaking이-esmodules에-의존적인-이유">TreeShaking이 ESModules에 의존적인 이유</h3>
<p>Webpack에서는 트리쉐이킹이 ESModules 모듈 로더에 의존한다고 설명하고 있습니다.</p>
<blockquote>
<p><em>Tree shaking</em> is a term commonly used in the JavaScript context for dead-code elimination. It relies on the <a class="link" href="http://exploringjs.com/es6/ch_modules.html#static-module-structure"  target="_blank" rel="noopener"
    >static structure</a> of ES2015 module syntax, i.e. <a class="link" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import"  target="_blank" rel="noopener"
    >import</a> and <a class="link" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/export"  target="_blank" rel="noopener"
    >export</a>.
<strong><em>Webpack</em></strong></p>
</blockquote>
<p>이유를 설명하자면 ESModules 방식은 컴파일러가 사용자의 코드를 더 잘 이해할 수 있는 환경이며, 정적인 특성을 가진 덕분에 구문 분석이 용이하기 때문입니다.</p>
<h3 id="strict-mode">Strict Mode</h3>
<p>ESModule 시스템에서는 기본적으로 <code>strict</code> 모드가 활성화되어있습니다. <code>strict</code> 모드를 간단하게 말씀드리면 컴파일러가 사용자가 작성한 코드를 잘 이해할 수 있게 비논리적인 동작을 막는 역할입니다. 스코프에 <code>'use strict'</code>을 사용하면 strict 모드가 활성화되며 ES6에서는 기본적으로 사용하고 있습니다.</p>
<div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="s1">&#39;use strict&#39;</span><span class="p">;</span>
</code></pre></div><p>이 규칙을 간단하게 설명해보자면..</p>
<ul>
<li>변수는 반드시 선언되어야한다.</li>
<li>각 함수 매개변수는 고유한 이름을 가져야한다. (그렇지 않으면 문법 오류로 간주)</li>
<li>JavaScript의 고유한 예약어에 바인딩할 수 없음 (protected, static, interface..)</li>
<li><code>with</code> 명령어 사용 제한</li>
</ul>
<h3 id="정적인-특성을-갖는-esmodules">정적인 특성을 갖는 ESModules</h3>
<p>ESModules의 import, export구문은 최상위 스코프에만 배치될 수 있습니다. 이 규칙으로 인해 컴파일러가 모듈을 더 쉽게 분석할 수 있습니다.</p>
<div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="kr">export</span> <span class="kr">const</span> <span class="nx">foo</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="kr">export</span> <span class="k">default</span> <span class="s1">&#39;bar&#39;</span><span class="p">;</span> <span class="c1">// SyntaxError
</span><span class="c1"></span><span class="p">};</span>

<span class="nx">foo</span><span class="p">();</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="kr">import</span> <span class="s1">&#39;lodash&#39;</span><span class="p">;</span>
</code></pre></div><p>반면 CommonJS 방식은 동적으로 표현식 내부에 내보낼 모듈을 할당할 수 있어 빌드 환경에서 예측하기 어렵습니다. 런타임 환경에서에만 사용할 수 있는 정보이기 때문에 빌드 단계에서 정확히 해당 컨텍스트에서 어떤 종속성을 가졌는지 파악하기가 어려워 번들러가 제대로 최적화시킬 수 없습니다.</p>
<div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="kr">const</span> <span class="nx">propertyName</span> <span class="o">=</span> <span class="s1">&#39;name&#39;</span><span class="p">;</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">[</span><span class="nx">propertyName</span><span class="p">]</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="c1">//module code };
</span></code></pre></div><h3 id="webpack-treeshaking">Webpack TreeShaking</h3>
<p><strong>ModuleConcatenationPlugin</strong><br>
Webpack에서는 <code>production</code> 모드에서 <code>ModuleConcatenationPlugin</code> 기능이 활성화되면서 트리쉐이킹이 자동으로 수행됩니다. 이 기능은 클로저를 활용해 모듈 범위를 동일한 스코프로 감싸고 내보낸 모듈에 동일한 함수명이 존재하는 경우 중복되지 않는 이름으로 변경합니다.</p>
<div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="c1">//index.js
</span><span class="c1"></span><span class="kr">import</span> <span class="p">{</span> <span class="nx">add</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./calc.js&#39;</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">substract</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">a</span> <span class="o">-</span> <span class="nx">b</span><span class="p">;</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">substract</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="kr">import</span> <span class="p">{</span> <span class="nx">dirname</span><span class="p">,</span> <span class="nx">resolve</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;path&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">fileURLToPath</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;url&#39;</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">__dirname</span> <span class="o">=</span> <span class="nx">dirname</span><span class="p">(</span><span class="nx">fileURLToPath</span><span class="p">(</span><span class="kr">import</span><span class="p">.</span><span class="nx">meta</span><span class="p">.</span><span class="nx">url</span><span class="p">));</span>

<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;production&#39;</span><span class="p">,</span>
  <span class="nx">entry</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">index</span><span class="o">:</span> <span class="s1">&#39;./src/index.js&#39;</span>
  <span class="p">},</span>
  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;output.js&#39;</span><span class="p">,</span>
    <span class="nx">path</span><span class="o">:</span> <span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;dist&#39;</span><span class="p">),</span> <span class="c1">// __dirname: 현재 디렉토리
</span><span class="c1"></span>    <span class="nx">clean</span><span class="o">:</span> <span class="kc">true</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="cm">/******/</span> <span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="c1">// webpackBootstrap
</span><span class="c1"></span>  <span class="cm">/******/</span> <span class="s1">&#39;use strict&#39;</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">__webpack_exports__</span> <span class="o">=</span> <span class="p">{};</span> <span class="c1">// CONCATENATED MODULE: ./src/cjs/calc.js
</span><span class="c1"></span>
  <span class="kr">const</span> <span class="nx">add</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
  <span class="kr">const</span> <span class="nx">subtract</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">a</span> <span class="o">-</span> <span class="nx">b</span><span class="p">;</span>
  <span class="kr">const</span> <span class="nx">multiply</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">a</span> <span class="o">*</span> <span class="nx">b</span><span class="p">;</span>
  <span class="kr">const</span> <span class="nx">divide</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">a</span> <span class="o">/</span> <span class="nx">b</span><span class="p">;</span>

  <span class="kr">const</span> <span class="nx">max</span> <span class="o">=</span> <span class="p">(</span><span class="nx">arr</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">maxBy</span><span class="p">(</span><span class="nx">arr</span><span class="p">);</span> <span class="c1">// CONCATENATED MODULE: ./src/cjs/index.js
</span><span class="c1"></span>
  <span class="c1">// index.js
</span><span class="c1"></span>
  <span class="kr">const</span> <span class="nx">cjs_subtract</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">a</span> <span class="o">-</span> <span class="nx">b</span><span class="p">;</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">cjs_subtract</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span>

  <span class="cm">/******/</span>
<span class="p">})();</span>
</code></pre></div><p>또한 <code>minimize</code> 속성을 활용하면 사용하지 않는 함수 및 주석&amp;공백이 모두 제거 됩니다.</p>
<div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="c1">//output.js
</span><span class="c1"></span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="s1">&#39;use strict&#39;</span><span class="p">;</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div><p><strong>SideEffects와 useExports</strong><br>
트리쉐이킹 작업에서 단순히 사용하지 않는 모듈을 기준으로 제거한다면 애플리케이션 전역에서 영향을 주는 모듈들이 사라지게 되므로 서비스에 큰 영향을 줄 수 있습니다.<strong>(css, plugin과 같이 import만 선언한 모듈 등)</strong> 이를 위해서 개발자가 해당 프로젝트 또는 특정 모듈이 SideEffect가 있음을 알려주어야합니다.</p>
<p>Webpack 4부터 <code>package.json</code>내 sideEffects에 <code>false</code> 값을 부여하면, 컴파일러에게 해당 프로젝트 내 사용하지 않는 export된 모듈을 모두 제거해도 상관 없다는 것을 알릴 수 있습니다. (코드 단위에 사이드 이펙트가 존재한다면 배열로 소스 경로를 입력할 수 있습니다.)</p>
<div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="p">{</span>
  <span class="s2">&#34;name&#34;</span><span class="o">:</span> <span class="s2">&#34;bundlers&#34;</span><span class="p">,</span>
  <span class="s2">&#34;sideEffects&#34;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="s2">&#34;version&#34;</span><span class="o">:</span> <span class="s2">&#34;1.0.0&#34;</span><span class="p">,</span>
	<span class="p">...</span>
<span class="p">}</span>
</code></pre></div><p><code>useExports</code> 속성을 활용하면 <a class="link" href="https://github.com/terser/terser"  target="_blank" rel="noopener"
    >terser</a>를 사용하여 사이드이펙트를 감지할 수 있습니다. 하지만 문서에서는 <code>SideEffects</code> 속성을 권장하고 있습니다. (React 고차 컴포넌트 관련 문제 및 성능 사항)</p>
<div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="c1">//webpack.config.js
</span><span class="c1"></span><span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;development&#39;</span><span class="p">,</span>
  <span class="nx">entry</span><span class="o">:</span> <span class="s1">&#39;./src/index.js&#39;</span><span class="p">,</span>
  <span class="nx">optimization</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">usedExports</span><span class="o">:</span> <span class="kc">true</span>
  <span class="p">},</span>
  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;test.bundle.js&#39;</span><span class="p">,</span>
    <span class="nx">chunkFormat</span><span class="o">:</span> <span class="s1">&#39;module&#39;</span><span class="p">,</span>
    <span class="nx">path</span><span class="o">:</span> <span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;dist&#39;</span><span class="p">),</span> <span class="c1">// __dirname: 현재 디렉토리
</span><span class="c1"></span>    <span class="nx">clean</span><span class="o">:</span> <span class="kc">true</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></div><p><strong>SideEffects와 useExports</strong></p>
<ul>
<li><strong>sideEffects:</strong> 전체 프로젝트 내 모듈 및 하위 트리를 감시하지 않기때문에 효율적입니다. <strong>(명시적으로 사이드이펙트가 없음을 웹팩에게 제공)</strong></li>
<li><strong>useExports:</strong> <code>terser</code>를 사용하여 사이드이펙트를 감지하기 때문에 성능에 제약이 있습니다.</li>
</ul>
<p><strong>Pure Annotation</strong><br>
PURE 어노테이션을 사용해 함수 단위로 순수한 함수임을 명시할 수 있습니다. <code>sideEffects</code>와 목적은 동일하지만 sideEffects와 달리 코드 구문 단위로 사용할 수 있습니다.</p>
<div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="c1">//modue.js
</span><span class="c1"></span><span class="cm">/*#__PURE__*/</span> <span class="nx">calculator</span><span class="p">(</span><span class="nx">input</span><span class="p">);</span>
</code></pre></div><p><strong>CommonJS TreeShaking</strong><br>
만약 사용 중인 모듈이 CommonJS인 경우, <a class="link" href="https://github.com/indutny/webpack-common-shake"  target="_blank" rel="noopener"
    >플러그인(webpack-common-shake)</a>을 사용하여 트리 쉐이킹을 수행할 수 있다는 사실을 발견했습니다. 🥲 하지만 직접 시도한 결과, Webpack5를 지원하지 않는 치명적인 단점 때문에 레거시 환경에서 사용해야 하며, ESModule을 사용하는 환경에서의 TreeShaking을 동일하게 보장하지는 않는다고 합니다.</p>
<div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="kr">const</span> <span class="nx">ShakePlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;webpack-common-shake&#39;</span><span class="p">).</span><span class="nx">Plugin</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;production&#39;</span><span class="p">,</span>
  <span class="nx">entry</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">index</span><span class="o">:</span> <span class="s1">&#39;./src/cjs/index.js&#39;</span>
  <span class="p">},</span>
  <span class="nx">optimization</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">minimize</span><span class="o">:</span> <span class="kc">false</span>
  <span class="p">},</span>
  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;output.js&#39;</span><span class="p">,</span>
    <span class="nx">path</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;dist&#39;</span><span class="p">),</span>
    <span class="nx">clean</span><span class="o">:</span> <span class="kc">true</span>
  <span class="p">},</span>
  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span><span class="k">new</span> <span class="nx">ShakePlugin</span><span class="p">()]</span>
<span class="p">};</span>
</code></pre></div><h3 id="rollup-treeshking">Rollup TreeShking</h3>
<p>Rollup에서는 기본적으로 ESModules 환경으로 모듈을 구성하면 별도의 설정 없이 트리 쉐이킹을 수행할 수 있습니다. 만일 CommonJS 방식의 모듈을 가져온다면 <code>rollup/plugin-commonjs</code> 플러그인을 통해 쉽게 ES6으로 변환시킬 수 있습니다.</p>
<div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="kr">import</span> <span class="nx">del</span> <span class="nx">from</span> <span class="s1">&#39;rollup-plugin-delete&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">analyzer</span> <span class="nx">from</span> <span class="s1">&#39;rollup-plugin-analyzer&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">nodeResolve</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@rollup/plugin-node-resolve&#39;</span><span class="p">;</span>

<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">input</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">index</span><span class="o">:</span> <span class="s1">&#39;src/cjs/index.js&#39;</span>
  <span class="p">},</span>
  <span class="nx">output</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nx">dir</span><span class="o">:</span> <span class="s1">&#39;rollup&#39;</span><span class="p">,</span>
      <span class="nx">entryFileNames</span><span class="o">:</span> <span class="s1">&#39;output.js&#39;</span><span class="p">,</span>
      <span class="nx">format</span><span class="o">:</span> <span class="s1">&#39;esm&#39;</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
    <span class="nx">del</span><span class="p">({</span> <span class="nx">targets</span><span class="o">:</span> <span class="s1">&#39;rollup/*&#39;</span> <span class="p">}),</span>
    <span class="nx">analyzer</span><span class="p">({</span>
      <span class="nx">summaryOnly</span><span class="o">:</span> <span class="kc">true</span>
    <span class="p">}),</span>
    <span class="nx">nodeResolve</span><span class="p">()</span>
  <span class="p">]</span>
<span class="p">};</span>
</code></pre></div><h2 id="참고-자료">참고 자료</h2>
<h3 id="모듈-시스템-1">모듈 시스템</h3>
<ul>
<li><a class="link" href="https://nodejs.org/api/modules.html#modules-commonjs-modules"  target="_blank" rel="noopener"
    >Node.js 공식 문서 - CommonJS modules</a></li>
<li><a class="link" href="https://nodejs.org/api/esm.html"  target="_blank" rel="noopener"
    >Node.js 공식 문서 - ECMAScript modules</a></li>
<li><a class="link" href="https://nodejs.org/api/packages.html"  target="_blank" rel="noopener"
    >Node.js 공식 문서 - Packages</a></li>
<li><a class="link" href="https://hacks.mozilla.org/2018/03/es-modules-a-cartoon-deep-dive/"  target="_blank" rel="noopener"
    >hacks.mozilla.org - ES modules: A cartoon deep-dive</a></li>
<li><a class="link" href="https://redfin.engineering/node-modules-at-war-why-commonjs-and-es-modules-cant-get-along-9617135eeca1"  target="_blank" rel="noopener"
    >Dan Fabulich Blog - Node Modules at War: Why CommonJS and ES Modules Can’t Get Along</a></li>
</ul>
<h3 id="번들러">번들러</h3>
<ul>
<li><a class="link" href="https://ui.toast.com/fe-guide/ko_BUNDLER"  target="_blank" rel="noopener"
    >TOAST UI - 번들러</a></li>
<li><a class="link" href="https://nextjs.org/learn/foundations/how-nextjs-works/bundling"  target="_blank" rel="noopener"
    >Next.JS Docs - What is Bundlings?</a></li>
<li><a class="link" href="https://ui.toast.com/weekly-pick/ko_20180716"  target="_blank" rel="noopener"
    >TOAST UI - 트리쉐이킹으로 자바스크립트 페이로드 줄이기</a></li>
<li><a class="link" href="https://rollupjs.org/"  target="_blank" rel="noopener"
    >Rollup 공식 문서</a></li>
<li><a class="link" href="https://webpack.kr/"  target="_blank" rel="noopener"
    >Webpack 공식 문서</a></li>
</ul>
<h3 id="treeshaking-1">TreeShaking</h3>
<ul>
<li><a class="link" href="https://so-so.dev/web/tree-shaking-module-system/"  target="_blank" rel="noopener"
    >SOSOLOG - TreeShaking과 ModuleSystem</a></li>
<li><a class="link" href="https://web.dev/articles/commonjs-larger-bundles?hl=ko#:~:text=Tree%2Dshaking%20with%20CommonJS%20%23&amp;text=Although%20this%20plugin%20adds%20support,guarantees%20as%20with%20ES%20modules"  target="_blank" rel="noopener"
    >web.dev - CommonJS가 번들을 더 크게 만드는 방법 (Minko Gechev)</a></li>
<li><a class="link" href="https://www.codefeetime.com/post/tree-shaking-a-react-component-library-in-rollup/"  target="_blank" rel="noopener"
    >codefeetime.com - Tree-Shaking a React Component Library in Rollup</a></li>
<li><a class="link" href="https://medium.com/@Rich_Harris/tree-shaking-versus-dead-code-elimination-d3765df85c80#.jnypozs9n"  target="_blank" rel="noopener"
    >Rich Harris Blog - Tree-shaking versus dead code elimination</a></li>
<li><a class="link" href="https://web.dev/articles/reduce-javascript-payloads-with-tree-shaking"  target="_blank" rel="noopener"
    >web.dev - Reduce JavaScript payloads with tree shaking</a></li>
<li><a class="link" href="https://ponyfoo.com/articles/es6-modules-in-depth"  target="_blank" rel="noopener"
    >Pony Foo - ES6 Modules in Depth</a></li>
</ul>

</section>
<script type="text/javascript">
    tocbot.init({
        
        tocSelector: '.js-toc',
        
        contentSelector: '.js-toc-content',
        
        headingSelector: 'h2, h3, h4, h5',
        orderedList: false
    });
</script>
<style>
     
    @media all and (min-width: 1025px) {
        .js-toc {
            position: fixed;
            top: 5%;
            right: 0;
        }

        .toc-list {
            padding: 0 4px;
            width: 180px;
        }
    }

    @media all and (max-width: 1024px) {
        .js-toc-content {
            position: relative;
        }

        .js-toc {
            margin-left: 2em;
            position: static;
        }
    }

    .js-toc::before {
        color: #0984e3;
        content: '목차';
        font-weight: 700;
    }

     
    .toc-list {
        color: #636e72;
        list-style: none;
    }

    .toc-list li {
        padding-bottom: 5px;
    }

    .is-active-link::before {
        background-color: #0984e3;
    }

    .is-active-li {
        color: #0984e3;
    }

    .toc-link::before {
        width: 0;
    }
</style>

    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/webpack/">webpack</a>
        
            <a href="/tags/rollup/">rollup</a>
        
    </section>


    </footer>

    
</article>

    <aside class="related-contents--wrapper">
    
    
        <h2 class="section-title"></h2>
        <div class="related-contents">
            <div class="flex article-list--tile">
                
                    
<article class="has-image">
    <a href="/post/package-manager/">
        
        
            <div class="article-image">
                
                    <img src="../../assets/header/package-manager.png" loading="lazy" data-key="package-manager" data-hash="../../assets/header/package-manager.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">패키저매니저 돌아보기</h2>
        </div>
    </a>
</article>
                
                    
<article class="has-image">
    <a href="/post/xstate-react/">
        
        
            <div class="article-image">
                
                    <img src="../../assets/header/xstate-react.jpg" loading="lazy" data-key="xstate-react" data-hash="../../assets/header/xstate-react.jpg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">JavaScript생태계의 유한 상태기계, XState 도입기</h2>
        </div>
    </a>
</article>
                
                    
<article class="has-image">
    <a href="/post/react-with-declarative/">
        
        
            <div class="article-image">
                
                    <img src="../../assets/header/react-declarative.png" loading="lazy" data-key="react-with-declarative" data-hash="../../assets/header/react-declarative.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">React는 왜 선언형 프로그래밍을 지향할까?</h2>
        </div>
    </a>
</article>
                
            </div>
        </div>
    
</aside>


    
        
    <div class="comments-container">
    
    <script src="https://utteranc.es/client.js"
        repo="yondo123/hugo-blog-comments"
        issue-term="title"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
</div>

<style>
    .comments-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
    }
</style>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2023 Jiny
    </section>
    
    <section class="powerby">
         <br />
        
    </section>
</footer>
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css">
            </main>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js"
    integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin="anonymous"></script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
